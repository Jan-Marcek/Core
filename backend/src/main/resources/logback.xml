<configuration>
	
	<appender name="DB" class="ch.qos.logback.classic.db.VirtuosoAppender">
	    
	    <!-- requiredKey must by in MDC to pass this filter, 
	    	so only messages related to executions will pass-->	    
		<filter class="cz.cuni.xrg.intlib.backend.logback.MdcFilter">
		   <requiredKey>execution</requiredKey>
		</filter>	    
	    <!-- execution level based filtering -->
		<filter class="cz.cuni.xrg.intlib.backend.logback.MdcExecutionLevelFilter" />
		
		<connectionSource class="ch.qos.logback.classic.db.ConfigurableConnectionSource" />
	</appender>


	<appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
		<!-- encoders are assigned the type ch.qos.logback.classic.encoder.PatternLayoutEncoder 
			by default -->
		<encoder>
			<pattern>%d{HH:mm:ss} [%thread] %-5level %logger{26} - %msg%n</pattern>
		</encoder>
	</appender>


	<!-- TODO define logger for EclipseLink -->
	
	<logger name="org.springframework" level="WARN" />
	
	<root level="ALL">
		<appender-ref ref="STDOUT" />
		<appender-ref ref="DB" />
	</root>

</configuration>